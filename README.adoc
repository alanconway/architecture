= ViaQ documentation

If you want to read the documentation visit https://viaq.github.io/documentation/.

To modify the documentation, read on.

== Requirements

You need to install the following tools:

* https://www.gnu.org/softwarprpr/make/[GNU make]
* https://asciidoctor.org/[asciidoctor (render AsciiDoc as HTML)]
* https://graphviz.org/[graphviz (render .dot diagrams as .svg)]
* https://linkcheck.github.io/linkchecker/[linkchecker]
* https://docs.gomplate.ca/[gomplate (apply Go templates, generate data model documentation)]

Instructions for Fedora:

----
dnf install make linkchecker graphviz
gem install asciidoctor
go get github.com/hairyhenderson/gomplate/v3/cmd/gomplate
----

For other platforms, you'll have to figure out the equivalent install steps.

== Project Layout

[horizontal]
src/:: AsciiDoc and DOT source files, edit these to modify the pages.
docs/:: Content for https://viaq.github.io/documentation/ generated by `make`, **do not edit**.
Makefile:: Run `make all` to re-generate the content for https://viaq.github.io/documentation/ before you commit.

`make` targets:

[horizontal]
all:: clean everything and re-build `docs/`, run validity checks (the default)
docs:: just rebuild out-of-date files.
check:: run the link checker.

== Updating the documentation

The documentation in `src/` is written in link:https://asciidoctor.org/docs/what-is-asciidoc/#what-is-asciidoc[AsciiDoc], a mature, plain-text writing format for documentation.
Diagrams are written in https://graphviz.org/documentation/[graphviz DOT] format.

The `.adoc` and `.dot` files in `src/` are rendered as `.html` and `.svg` files in `docs/` by `make all`.
Once checked-in, the contents of `docs/` are automatically published to https://viaq.github.io/documentation/ using https://pages.github.com/[GitHub pages]

To update the docs:

. Clone this repository.
. Edit or add files in `src/`.
. Preview your work: run `make docs` and view the `docs/*.html` files in a browser.
. Submit a link:{repo}/pulls[pull-request].

== Using the data model

The logging data model (fields and types in a logging record) is formally defined in the `src/data_model`.
It  can be used to generate documentation or code automatically.
See link:src/data_model/Makefile/README.adoc[] for more.
